---
title: 7.2 「二分查找」的模板写法
icon: yongyan
category: 二分查找
tags:
  - 减治思想
---

## 「二分查找」的模板写法

「力扣」上很多二分查找的问题并不像「力扣」第 704 题那样简单，例如：

+ 「力扣」第 34 题：要我们找到第 1 个等于 `target` 的位置；
+ 「力扣」第 34 题：要我们找到最后 1 个等于 `target` 的位置；
+ 「力扣」第 35 题、第 300 题：要我们找到大于等于 `target` 的第 1 个位置。

解决这些「二分查找」的思路如下图所示。

::: danger 提示

这个思路可以简单归纳为「两边夹」，也可以称为 **排除法**：把待搜索区间分为两个部分，一个部分一定不存在目标元素，另一个部分 **可能** 存在目标元素。

:::

![binary-search (1)](https://tva1.sinaimg.cn/large/008i3skNgy1gx4gvv33tug30m308w7k3.gif)

## 「力扣」上一类二分查找问题的共同特点（重点，需要在做题的过程中慢慢理解）

::: info 这些问题的共同特点（十分重要，请阅读 10 遍）

如果当前猜的数 `nums[mid]` 符合某个性质，我们还不能确定它一定就是我们要找的元素，必须向左边（或者向右边）继续看下去，才能确定 `nums[mid]` 是不是我们要找的元素。

:::

例如「力扣」第 34 题，要我们找有序整数数组里第 1 个等于 `target` 的位置（）。

![](https://tva1.sinaimg.cn/large/008i3skNgy1gwy4ujzavjj31hc0g2wgv.jpg)

一种常见的做法是：看到 $4$ 以后，继续向左边「线性查找」，此时时间复杂度变成 $O(N)$，这里 $N$ 是数组的长度。实际上正确的做法是：在左边查找的时候 **继续使用二分查找**。

「力扣」第 34 题我为大家录制了视频和编写了文字题解，请在后续章节阅读。

## 「二分查找」法的两个模板

模板代码只是告诉我们所有的二分查找都可以写成以下两种形式；

**代码 1**：

```java
// 目标元素可能存在在区间 [left..right]
while (left < right) {
    int mid = (left + right) / 2;
    if (判别条件) {
        // 下一轮搜索区间 [mid + 1..right]
        left = mid + 1;
    } else {
        // 下一轮搜索区间 [left..mid]
        right = mid;
    }
}
// 退出循环以后 left == right 成立
// 视情况判断 nums[left] 是否是我们要找的
```

**代码 2**：

```java
// 目标元素可能存在在区间 [left..right]
while (left < right) {
    int mid = (left + right + 1) / 2;
    if (判别条件) {
        // 下一轮搜索区间是 [left..mid - 1]
        right = mid - 1;
    } else {
        // 下一轮搜索区间是 [mid..right]
        left = mid;
    }
}
// 退出循环以后 left == right 成立
// 视情况判断 nums[left] 是否是我们要找的
```

::: danger 但是模板代码没有告诉我们：
+ 什么时候向左边找、什么时候向右边找；
+ 看到的 `mid` 位置的值是保留还是排除。  

这两个问题的答案需要 **认真审题**，因此需要我们认真理解题目意思。
:::


