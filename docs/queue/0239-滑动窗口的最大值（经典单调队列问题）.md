# LeetCode 第 239 题：滑动窗口的最大值（单调队列模板题）

[239. 滑动窗口最大值](https://leetcode-cn.com/problems/sliding-window-maximum/)

> 所有单调队列的问题，最好都要画图来做。



> 给定一个数组 nums，有一个大小为 k 的滑动窗口从数组的最左侧移动到数组的最右侧。你只可以看到在滑动窗口内的 k 个数字。滑动窗口每次只向右移动一位。
>
> 返回滑动窗口中的最大值。
>
> 示例:
>
> ```
> 输入: nums = [1,3,-1,-3,5,3,6,7], 和 k = 3
> 输出: [3,3,5,5,6,7] 
> 解释: 
> 
>   滑动窗口的位置                最大值
> 
> ---------------               -----
> 
> [1  3  -1] -3  5  3  6  7       3
>  1 [3  -1  -3] 5  3  6  7       3
>  1  3 [-1  -3  5] 3  6  7       5
>  1  3  -1 [-3  5  3] 6  7       5
>  1  3  -1  -3 [5  3  6] 7       6
>  1  3  -1  -3  5 [3  6  7]      7
> ```
>
> 
>
>
> 提示：
>
> 你可以假设 `k` 总是有效的，在输入数组不为空的情况下，`1 ≤ k ≤` 输入数组的大小。
>
> **进阶：**
>
> 你能在线性时间复杂度内解决此题吗？

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/sliding-window-maximum
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。

> 1、技巧：画图。
>
> 2、滑动窗口：单调队列。



方法一：暴力求解

![image-20191125110305398](/Users/liwei/Library/Application Support/typora-user-images/image-20191125110305398.png)

> 1、“滑动窗口”天然有队列的特性。
>
> 2、因为这道题，先进来的小的数一定不是解，因此这个队列是单调的。
>
> 3、队首元素一定是最大元素。

![image-20191125110327450](/Users/liwei/Library/Application Support/typora-user-images/image-20191125110327450.png)

> 队尾元素小于等于当前元素的时候，就可以删去。

![image-20191125110522776](/Users/liwei/Library/Application Support/typora-user-images/image-20191125110522776.png)



![image-20191125080025474](/Users/liwei/Library/Application Support/typora-user-images/image-20191125080025474.png)

C++ 代码：

![image-20191125080048460](/Users/liwei/Library/Application Support/typora-user-images/image-20191125080048460.png)

C++ 代码：

![image-20191125110723122](/Users/liwei/Library/Application Support/typora-user-images/image-20191125110723122.png)





![image-20191127075426160](/Users/liwei/Library/Application Support/typora-user-images/image-20191127075426160.png)

![image-20191127075513785](/Users/liwei/Library/Application Support/typora-user-images/image-20191127075513785.png)

![image-20191127075932897](/Users/liwei/Library/Application Support/typora-user-images/image-20191127075932897.png)

![image-20191127080236547](/Users/liwei/Library/Application Support/typora-user-images/image-20191127080236547.png)



![image-20191127080331187](/Users/liwei/Library/Application Support/typora-user-images/image-20191127080331187.png)



![image-20191127080503255](/Users/liwei/Library/Application Support/typora-user-images/image-20191127080503255.png)

![image-20191127080611784](/Users/liwei/Library/Application Support/typora-user-images/image-20191127080611784.png)

![image-20191127080714410](/Users/liwei/Library/Application Support/typora-user-images/image-20191127080714410.png)





即使使用 Java 的动态数组都是可以的。

```java
class Solution {
    public int[] maxSlidingWindow(int[] nums, int k) {
        int len = nums.length;
        if (len < 1) {
            return new int[0];
        }
        int[] res = new int[len - k + 1];
        List<Integer> queue = new ArrayList<>(k + 1);
        for (int i = 0; i < len; i++) {
            // 考虑删除队首元素
            if (i >= k && !queue.isEmpty() && queue.get(0) == i - k) {
                queue.remove(0);
            }
            while (!queue.isEmpty() && nums[queue.get(queue.size() - 1)] < nums[i]) {
                queue.remove(queue.size() - 1);
            }
            queue.add(i);
            // 形成一个单调不减的队列，队首是滑动窗口的最大值
            // 记录结果集
            if (i >= k - 1) {
                res[i - k + 1] = nums[queue.get(0)];
            }
        }
        return res;
    }
}
```

