大家好  这里是算法不好玩

这一节我们为大家简单比较几种二分查找的写法

以帮助大家更好地理解二分查找

几种二分查找写法的区别在于循环可以继续的条件

while(left <= right）

表示在区间里只有一个元素的时候

还需要继续查找

这一点在待查找的元素性质简单的时候用

在循环体内就可以返回了

否则的话不是向左边继续查找

就是向右边继续查找


while(left < right）

这种写法最好的特点是

退出循环以后 left 和 right 就重合在一起

在退出循环以后返回目标元素的值

我们就不需要考虑返回 left 还是 right

这种写法在待查找的元素性质复杂的时候用


缺点是需要理解取中间数是不是需要加 1 

解决的办法我们也多次提到过了

遇到死循环的时候

把 left 和 right 的值

打印出来看一下就清楚了


while(left + 1 < right）

这种写法的特点是

在退出循环以后区间 left 到 right 里有两个元素

在循环体内不用考虑是不是排除 mid 位置的值

但是也需要分析向左边继续查找还是向右边继续查找

这种写法的缺点是十分明显的

退出循环以后

区间 left 到 right 里剩下两个元素

还需要增加一段逻辑

其实不会使得解决问题变得简单


大家感兴趣的话不妨试一下

最后一种是带 ans 的二分查找

我们以「力扣」第 35 题的官方题解代码为例

ans 表示了可能的取值

初始化的时候 ans = n 这是因为根据这道题的条件

数组的长度有可能是返回值

这道题目要我们找第 1 个大于等于 target 的元素的位置

所以当 nums[mid] 大于等于 target 的时候

mid 有可能是我们要找的元素

将 ans 更新为 mid

下一轮继续向左边找

因此 right 更新为 mid - 1

if 的反面就需要向右边继续查找

所以 left 更新为 mid + 1

更新 left 和 right 的时候都排除了 mid 的位置的值

最后返回 ans


我们刚才和大家简单地介绍了大家在「力扣」的题解区

可以看到的几种二分查找的写法


第一种写法在待搜索的元素性质简单的时候使用

在循环体内看到了目标元素就可以返回了


第二种写法在待搜索的元素性质较为复杂的时候使用

退出循环体以后才可以确定最后剩下的元素是不是我们要找的目标元素

第三种写法看似可以偷一些懒

但是退出循环以后区间里有两个元素

必须要增加一段逻辑来决定返回哪一个

第四种写法也需要分析向左走还是向右走

是不是保留 mid 位置的值

循环体内需要分几种情况讨论

其实又回到了第一种和第二种写法


二分查找应该怎么写

不是解决二分查找问题的关键

只要我们认真审题

足够地耐心和细心

相信就不难把二分查找的问题写对

我们在下一章节和大家分享的二分查找的习题

绝大多数问题都会用第二种写法完成

每一道问题我们都会和大家分享应该如何分析问题

是不是保留 mid 位置的值

下一轮搜索是向左边继续查找

还是向右边继续查找

这些完全没有技巧

只要大家足够的细心和耐心

就不难把二分查找的问题写对

这就是这一章节的内容

感谢大家的收看


```java
public class Solution {

    public int search(int[] nums, int target) {
        int len = nums.length;
        int left = 0;
        int right = len - 1;
        // 目标元素可能存在在区间 [left..right]
        while (left + 1 < right) {
            int mid = left + (right - left) / 2;
            if (nums[mid] == target) {
                return mid;
            } else if (nums[mid] < target) {
                left = mid;
            } else {
                right = mid;
            }
        }

        if (nums[left] == target) {
            return left;
        }
        if (nums[right] == target) {
            return right;
        }
        return -1;
    }
}
```


---

草稿

其实写对二分查找并不在于我们怎么写

因为做对算法问题绝对不是

简单地套用别人写过的代码就能轻松完成的事情

首先需要我们认真地审题

看漏一个条件

看错一个条件

都很有可能解法大不一样

使用二分查找解题的重点在于分析看到了 mid 位置的元素的值以后

下一轮搜索是向左走还是向右走

mid 位置的元素是应该保留还是可以排除

这一点没有分析对

很多时候原因只是不认真、不仔细

并且我们需要适当的练习

有一定耐心去调试

真正看到循环过程中变量 left 和 right 的值

比对着屏幕一直想要有效地多

这一点适用于所有的算法与数据结构的学习

不管哪一种二分查找的写法

思想都只有一个

那就是逐步缩小搜索区间




但是写对二分查找绝对不是简单地套用它们就可以做对的

我经常使用的是第 2 种二分查找的写法

这是因为在「力扣」上遇到的二分查找的问题

绝大多数不会在循环体内就返回

我们还要继续看一下中间位置的左边元素和右边元素

才能确定是不是找到了目标元素

并且第 2 种写法

把区间分成两个部分

一个分支写对了

另一个分支可以不用思考

写出反面区间就可以了

退出循环以 left 和 right 重合在一起

返回 left 或者 right 的值就可以了

这两点可以减少思考问题的难度


我们再为大家归纳一下「二分查找」算法的重点

审题很重要

任何二分查找的写法都需要根据题目中给出的条件

仔细分析向左走还是向右走

如何编写 if 和 else 分支需要再做题的过程中慢慢总结

第 5 节我们也和大家分享了写分支逻辑的经验

一定量的练习是很重要的

并且要有耐心调试

除了认真仔细以外

写对二分查找没有捷径

不管哪一种二分查找

算法的思想都是在缩小搜索区间

这就是这一章节的内容

下一章节我们和大家分享二分查找的练习

以帮助大家更好地理解和应用二分查找

感谢大家的收看