剑指 offer 第 53 题（逐字稿，同 LC 34）

---


大家好，欢迎收看「力扣」视频题解

本期视频我们要和大家分享的是「剑指 offer 第 53 题」的第一个问题：在排序数组中查找数字。

这道题让我们统计一个数字在排序数组中出现的次数。

示例 1：目标元素在输入数组中出现了 2 次。输出 2。
示例 2：目标元素在输入数组中并没有出现。输出 0。

一个很容易想到的方法是使用一个变量记录目标元素出现的次数，称为计数器。我们只需要遍历输入数组一次。当遍历到的元素的值恰好等于目标元素的值的时候给计数器加一。遍历完成以后返回计数器变量。

这样的算法遍历了输入数组一次。时间复杂度为 big O N，空间复杂度为 big O 1。

这种算法没有利用到数组有序的特点。

下面我们介绍方法二。由于数组已经有序，我们在查找目标元素的时候就可以使用二分查找算法。

先找到目标元素第一次出现的下标。然后再找到目标元素最后一次出现的下标。

它们二者的值的「差」再加上一。就等于目标元素出现的次数。

下面我们来分析下如何找到目标元素第一次出现的下标。根据二分查找算法选择的中间元素看到的数值与目标元素的大小关系，可以分为如下三种情况：

+ 如果二分查找算法看到的中间元素小于目标元素，我们就知道了目标元素第一次出现的下标肯定在当前看到的这个位置的右边，下雨了我们应该在这个位置的右边继续查找

+ 如果二分查找算法看到的元素的值写恰好等于目标元素。那么当前看到的这个位置很有可能是目标元素第一次出现的位置。但是它的右边一定不会是目标元素第一次出现的位置。所以我们应该在当前位置的左边，包括当前位置这个区间里去查找目标元素出现的的第一个位置。

+ 如果二分查找算法看到的元素的值大于目标元素。那么当前位置的右边一定不存在目标元素。出现的第一个位置。并且由于当前位置不等于目标元素。我们就需要在当前位置的左边继续查找目标元素出现的。第一个位置。

同理，我们也可以分类讨论。如何找到目标元素最后一次出现的下标，这一步我们留给大家来完成。大家也可以参考我们马上要给出的代码讲解。二分查找算法的核心思想是如何一步一步地缩小搜索区间。

下面我们来看一下代码。

---

方法二：使用了两次二分查找算法，因此时间复杂度是 big O log n ，这里 n 是输入数组的长度，空间复杂度是 big O 1。


这就是这道问题的视频题解，感谢大家的收看。